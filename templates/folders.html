<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Folder Management</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
    />
    <style>
      /* Core styling and variables */
      :root {
        --primary: #4f46e5;
        --primary-dark: #4338ca;
        --primary-light: #818cf8;
        --secondary: #06b6d4;
        --secondary-dark: #0891b2;
        --accent: #10b981;
        --dark: #111827;
        --dark-2: #1f2937;
        --light: #f9fafb;
        --gray: #9ca3af;
        --danger: #ef4444;
        --success: #10b981;
        --glass: rgba(17, 25, 40, 0.8);
        --glass-border: rgba(255, 255, 255, 0.125);
        --glow-primary: 0 0 20px rgba(79, 70, 229, 0.6);
        --glow-secondary: 0 0 15px rgba(6, 182, 212, 0.5);
        --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      body {
        background-color: var(--dark);
        color: var(--light);
        min-height: 100vh;
        overflow: hidden;
        font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont,
          "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;
        position: relative;
      }

      /* Visualization area */
      .visualization-area {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        overflow: hidden;
        z-index: -1;
        background: radial-gradient(circle at center, #182338 0%, #0c1221 100%);
      }

      /* Grid overlay for tech feel */
      .grid-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: linear-gradient(rgba(65, 78, 112, 0.05) 1px, transparent 1px),
                          linear-gradient(90deg, rgba(65, 78, 112, 0.05) 1px, transparent 1px);
        background-size: 40px 40px;
        pointer-events: none;
      }

      /* CI/CD Pipeline animation elements */
      .pipeline-system {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }

      .pipeline {
        position: absolute;
        height: 2px;
        background: var(--primary-light);
        opacity: 0.2;
        transform-origin: left center;
        will-change: width, height, opacity;
      }

      .pipeline-horizontal {
        width: 100px;
        animation: extendPipeline 4s infinite;
      }

      .pipeline-vertical {
        width: 2px;
        height: 100px;
        animation: extendPipelineVertical 4s infinite;
      }

      .pipeline-node {
        position: absolute;
        width: 12px;
        height: 12px;
        background: var(--primary);
        border-radius: 50%;
        box-shadow: var(--glow-primary);
        will-change: transform, opacity;
      }

      .pipeline-data {
        position: absolute;
        width: 8px;
        height: 4px;
        background: var(--secondary);
        border-radius: 4px;
        box-shadow: var(--glow-secondary);
        opacity: 0;
        animation: moveData 4s infinite;
        will-change: transform, opacity;
      }

      /* Cloud server elements */
      .cloud-server {
        position: absolute;
        width: 80px;
        height: 120px;
        background: linear-gradient(
          135deg,
          rgba(30, 41, 59, 0.7),
          rgba(17, 24, 39, 0.8)
        );
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-around;
        padding: 10px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        will-change: transform;
        animation: floatServer 10s ease-in-out infinite;
        z-index: 0;
      }

      .server-light {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background-color: var(--accent);
        box-shadow: 0 0 8px var(--accent);
        animation: serverPulse 2s infinite alternate;
      }

      .server-rack {
        width: 60px;
        height: 10px;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        margin: 2px 0;
        position: relative;
        overflow: hidden;
      }

      .server-progress {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 30%;
        background: linear-gradient(90deg, var(--primary), var(--secondary));
        animation: serverProgress 4s infinite;
        will-change: width;
      }

      /* Code block animation */
      .code-block {
        position: absolute;
        width: 140px;
        height: 80px;
        background: rgba(15, 23, 42, 0.6);
        border-radius: 6px;
        border-left: 3px solid var(--primary);
        padding: 8px;
        font-family: "Fira Code", monospace;
        font-size: 10px;
        color: var(--gray);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        overflow: hidden;
        will-change: transform;
        animation: floatCodeBlock 15s ease-in-out infinite alternate;
        z-index: 0;
      }

      .code-line {
        margin-bottom: 4px;
        white-space: nowrap;
        transform: translateX(0);
        animation: codeLine 12s infinite;
      }

      .code-keyword {
        color: #818cf8;
      }

      .code-string {
        color: #34d399;
      }

      .code-function {
        color: #60a5fa;
      }

      /* Microservice containers */
      .microservice {
        position: absolute;
        width: 60px;
        height: 60px;
        border-radius: 8px;
        background: rgba(30, 41, 59, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.05);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        will-change: transform;
        animation: floatMicroservice 12s ease-in-out infinite alternate;
        z-index: 0;
      }

      .microservice-icon {
        font-size: 1.5rem;
        color: var(--primary-light);
      }

      /* Floating data packages */
      .data-package {
        position: absolute;
        width: 12px;
        height: 12px;
        border-radius: 4px;
        background: var(--primary-light);
        box-shadow: 0 0 8px var(--primary-light);
        opacity: 0.8;
        animation: floatingData 10s infinite linear;
        z-index: 0;
      }

      /* Connection lines between elements */
      .connection-line {
        position: absolute;
        height: 2px;
        background: linear-gradient(90deg, var(--primary-light), transparent);
        animation: pulseLine 3s infinite;
        z-index: 0;
      }

      /* Animation robot */
      .automation-robot {
        position: absolute;
        width: 50px;
        height: 50px;
        border-radius: 12px;
        background: linear-gradient(
          135deg,
          var(--primary-dark),
          var(--primary)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: var(--glow-primary);
        animation: moveRobot 15s infinite linear;
        z-index: 0;
      }

      .robot-eye {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: var(--light);
        position: relative;
        animation: blinkEye 3s infinite;
      }

      .robot-arm {
        position: absolute;
        width: 20px;
        height: 4px;
        background: var(--primary-dark);
        border-radius: 4px;
      }

      .robot-arm-left {
        left: -15px;
        transform-origin: right center;
        animation: moveArmLeft 4s infinite;
      }

      .robot-arm-right {
        right: -15px;
        transform-origin: left center;
        animation: moveArmRight 4s infinite;
      }

      /* Custom navbar styling */
      .navbar {
        background: var(--glass) !important;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--glass-border);
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        z-index: 100;
      }

      .btn-secondary {
        background-color: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.1);
        transition: var(--transition-smooth);
      }

      .btn-secondary:hover {
        background-color: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
      }

      .btn-danger {
        background-color: var(--danger);
        border-color: var(--danger);
        transition: var(--transition-smooth);
      }

      .btn-danger:hover {
        background-color: #e02424;
        border-color: #e02424;
        transform: translateY(-2px);
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        border: none;
        transition: var(--transition-smooth);
        box-shadow: 0 4px 6px rgba(79, 70, 229, 0.25);
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 10px rgba(79, 70, 229, 0.3);
      }

      .btn-info {
        background-color: var(--secondary);
        border: none;
        color: white;
        transition: var(--transition-smooth);
      }

      .btn-info:hover {
        background-color: var(--secondary-dark);
        transform: translateY(-2px);
      }

      .btn-warning {
        background-color: #f59e0b;
        border: none;
        transition: var(--transition-smooth);
      }

      .btn-warning:hover {
        background-color: #d97706;
        transform: translateY(-2px);
      }

      /* Container styles */
      .container {
        background: var(--glass);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 16px;
        border: 1px solid var(--glass-border);
        padding: 2rem;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        z-index: 10;
        position: relative;
        margin-top: 2rem;
        margin-bottom: 2rem;
        animation: fadeIn 0.5s ease-out;
      }

      /* Title styling */
      h1 {
        background: linear-gradient(135deg, var(--light), var(--primary-light));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        font-weight: 700;
        margin-bottom: 1.5rem;
      }

      /* List group styling */
      .list-group-item {
        background-color: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        margin-bottom: 0.5rem;
        border-radius: 8px !important;
        color: var(--light);
        transition: var(--transition-smooth);
      }

      .list-group-item:hover {
        background-color: rgba(255, 255, 255, 0.08);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      /* Alert styling */
      .alert {
        border-radius: 10px;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
      }

      .alert-success {
        background-color: rgba(16, 185, 129, 0.15);
        border: 1px solid rgba(16, 185, 129, 0.3);
        color: #6ee7b7;
      }

      .alert-danger {
        background-color: rgba(239, 68, 68, 0.15);
        border: 1px solid rgba(239, 68, 68, 0.3);
        color: #fca5a5;
      }

      .alert-warning {
        background-color: rgba(245, 158, 11, 0.15);
        border: 1px solid rgba(245, 158, 11, 0.3);
        color: #fcd34d;
      }

      .alert-info {
        background-color: rgba(6, 182, 212, 0.15);
        border: 1px solid rgba(6, 182, 212, 0.3);
        color: #67e8f9;
      }

      /* Keyframes for animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes extendPipeline {
        0%, 20% { width: 0; opacity: 0.1; }
        50%, 70% { width: 100px; opacity: 0.5; }
        100% { width: 0; opacity: 0.1; }
      }

      @keyframes extendPipelineVertical {
        0%, 20% { height: 0; opacity: 0.1; }
        50%, 70% { height: 100px; opacity: 0.5; }
        100% { height: 0; opacity: 0.1; }
      }

      @keyframes moveData {
        0%, 20% { left: 0; opacity: 0; }
        30% { opacity: 1; }
        70% { left: 100px; opacity: 1; }
        80%, 100% { left: 100px; opacity: 0; }
      }

      @keyframes moveDataVertical {
        0%, 20% { top: 0; opacity: 0; }
        30% { opacity: 1; }
        70% { top: 100px; opacity: 1; }
        80%, 100% { top: 100px; opacity: 0; }
      }

      @keyframes serverPulse {
        0% { opacity: 0.5; }
        100% { opacity: 1; }
      }

      @keyframes serverProgress {
        0% { width: 0; }
        50% { width: 70%; }
        100% { width: 0; }
      }

      @keyframes codeLine {
        0%, 10% { transform: translateX(0); }
        40%, 60% { transform: translateX(-50%); }
        90%, 100% { transform: translateX(-100%); }
      }

      @keyframes moveRobot {
        0% { transform: translate(0, 0) rotate(0deg); }
        25% { transform: translate(100px, 100px) rotate(90deg); }
        50% { transform: translate(0, 200px) rotate(180deg); }
        75% { transform: translate(-100px, 100px) rotate(270deg); }
        100% { transform: translate(0, 0) rotate(360deg); }
      }

      @keyframes blinkEye {
        0%, 48%, 52%, 100% { background: var(--light); }
        50% { background: var(--primary); }
      }

      @keyframes moveArmLeft {
        0%, 100% { transform: rotate(0deg); }
        50% { transform: rotate(-45deg); }
      }

      @keyframes moveArmRight {
        0%, 100% { transform: rotate(0deg); }
        50% { transform: rotate(45deg); }
      }

      @keyframes floatingData {
        0% { transform: translate(0, 0) rotate(0deg); }
        25% { transform: translate(300px, -100px) rotate(90deg); }
        50% { transform: translate(400px, 200px) rotate(180deg); }
        75% { transform: translate(100px, 300px) rotate(270deg); }
        100% { transform: translate(0, 0) rotate(360deg); }
      }

      @keyframes pulseLine {
        0%, 100% { opacity: 0.1; }
        50% { opacity: 0.5; }
      }

      @keyframes floatServer {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }

      @keyframes floatCodeBlock {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-15px) rotate(1deg); }
      }

      @keyframes floatMicroservice {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        33% { transform: translateY(-8px) rotate(1deg); }
        66% { transform: translateY(5px) rotate(-1deg); }
      }
    </style>
  </head>
  <body>
    <!-- Visualization area for CI/CD and cloud animations -->
    <div class="visualization-area">
      <!-- Grid overlay for tech feel -->
      <div class="grid-overlay"></div>
      
      <!-- Dynamic pipeline system (will be generated by JS) -->
      <div id="pipeline-system" class="pipeline-system"></div>

      <!-- Cloud servers -->
      <div class="cloud-server" style="top: 15%; left: 10%">
        <div class="server-light"></div>
        <div class="server-rack"><div class="server-progress"></div></div>
        <div class="server-rack"><div class="server-progress"></div></div>
        <div class="server-rack"><div class="server-progress"></div></div>
      </div>

      <div class="cloud-server" style="top: 60%; left: 85%">
        <div class="server-light"></div>
        <div class="server-rack"><div class="server-progress"></div></div>
        <div class="server-rack"><div class="server-progress"></div></div>
        <div class="server-rack"><div class="server-progress"></div></div>
      </div>

      <!-- Code blocks -->
      <div class="code-block" style="top: 25%; left: 75%">
        <div class="code-line">
          <span class="code-keyword">function</span>
          <span class="code-function">deploy</span>() {
        </div>
        <div class="code-line">
          <span class="code-keyword">const</span> build =
          <span class="code-function">createBuild</span>();
        </div>
        <div class="code-line">
          <span class="code-function">runTests</span>(build);
        </div>
        <div class="code-line">
          <span class="code-function">uploadToCloud</span>();
        </div>
        <div class="code-line">}</div>
      </div>

      <div class="code-block" style="top: 65%; left: 20%">
        <div class="code-line">
          <span class="code-keyword">class</span>
          <span class="code-function">CloudService</span> {
        </div>
        <div class="code-line">
          <span class="code-function">constructor</span>() {
        </div>
        <div class="code-line">this.instances = [];</div>
        <div class="code-line">}</div>
        <div class="code-line">
          <span class="code-function">scale</span>() { ... }
        </div>
        <div class="code-line">}</div>
      </div>

      <!-- Microservices -->
      <div class="microservice" style="top: 30%; left: 30%">
        <div class="microservice-icon">‚öôÔ∏è</div>
      </div>

      <div class="microservice" style="top: 50%; left: 70%">
        <div class="microservice-icon">üîÑ</div>
      </div>

      <div class="microservice" style="top: 75%; left: 40%">
        <div class="microservice-icon">üì¶</div>
      </div>

      <!-- Automation robot -->
      <div class="automation-robot" style="top: 40%; left: 50%">
        <div class="robot-eye"></div>
        <div class="robot-arm robot-arm-left"></div>
        <div class="robot-arm robot-arm-right"></div>
      </div>

      <!-- Data packages -->
      <div class="data-package" style="top: 20%; left: 40%"></div>
      <div class="data-package" style="top: 70%; left: 60%"></div>
      <div class="data-package" style="top: 40%; left: 20%"></div>
    </div>

    <!-- Upper Panel code start -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container-fluid">
        <!-- Back Button -->
        <button class="btn btn-secondary me-2" onclick="window.history.back();">
          <i class="fas fa-arrow-left me-1"></i> Back
        </button>

        <div class="ms-auto d-flex align-items-center">
          <!-- Profile Name from Session -->
          <span class="text-white me-3">Welcome, {{ session.get('user', 'Guest') }}</span>

          <!-- Logout Button -->
          <a href="{{ url_for('auth.logout') }}" class="btn btn-danger">
            <i class="fas fa-sign-out-alt me-1"></i> Logout
          </a>
        </div>
      </div>
    </nav>
    <!-- Upper Panel code ends  -->
     
    <div class="container">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Folder Management</h1>
        <a href="{{ url_for('repo_v1.url_form') }}" class="btn btn-primary">
          <i class="fas fa-plus me-1"></i> Add New Repo
        </a>
      </div>

      <!-- Flash messages -->
      {% with messages = get_flashed_messages(with_categories=true) %} 
        {% if messages %}
          <div>
            {% for category, message in messages %}
              <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            {% endfor %}
          </div>
        {% endif %} 
      {% endwith %}

      <div class="list-group">
        {% for folder in folders %}
          <div class="list-group-item d-flex justify-content-between align-items-center">
            <span>{{ folder }}</span>
            <div>
              <!-- New combined Edit & Delete button redirecting to flask_v1 -->
              <a href="{{ url_for('flask_v1_bp.flask_v1', folder_name=folder) }}" class="btn btn-info btn-sm me-2">
                <i class="fas fa-cogs me-1"></i> Edit & Delete
              </a>
              
              <!-- Existing Edit button -->
              <a href="{{ url_for('folder.edit_folder', folder_name=folder) }}" class="btn btn-warning btn-sm me-2">
                <i class="fas fa-edit me-1"></i> Edit
              </a>

              <!-- Form for deleting the folder -->
              <form action="{{ url_for('folder.delete_folder', folder_name=folder) }}" method="POST" style="display: inline">
                <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this folder?');">
                  <i class="fas fa-trash-alt me-1"></i> Delete
                </button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

    <script>
      window.addEventListener("pageshow", function (event) {
        if (event.persisted || performance.navigation.type === 2) {
          location.reload();
        }
      });

      // Generate dynamic CI/CD pipelines
      document.addEventListener("DOMContentLoaded", function () {
        const pipelineSystem = document.getElementById("pipeline-system");

        // Create pipelines and nodes
        function createPipelines() {
          // Clear existing pipelines
          pipelineSystem.innerHTML = "";

          // Number of pipeline elements
          const numPipelines = 20;

          for (let i = 0; i < numPipelines; i++) {
            // Random position
            const x = Math.random() * (window.innerWidth - 100);
            const y = Math.random() * (window.innerHeight - 100);

            // Random direction (horizontal or vertical)
            const isVertical = Math.random() > 0.5;

            // Create pipeline
            const pipeline = document.createElement("div");
            pipeline.className = isVertical
              ? "pipeline pipeline-vertical"
              : "pipeline pipeline-horizontal";
            pipeline.style.left = x + "px";
            pipeline.style.top = y + "px";
            pipeline.style.animationDelay = Math.random() * 4 + "s";
            pipelineSystem.appendChild(pipeline);

            // Create start node
            const startNode = document.createElement("div");
            startNode.className = "pipeline-node";
            startNode.style.left = "0";
            startNode.style.top = "0";
            startNode.style.transform = "translate(-50%, -50%)";
            pipeline.appendChild(startNode);

            // Create end node for horizontal pipelines
            if (!isVertical) {
              const endNode = document.createElement("div");
              endNode.className = "pipeline-node";
              endNode.style.right = "0";
              endNode.style.top = "0";
              endNode.style.left = "auto";
              endNode.style.transform = "translate(50%, -50%)";
              pipeline.appendChild(endNode);
            } else {
              // End node for vertical pipelines
              const endNode = document.createElement("div");
              endNode.className = "pipeline-node";
              endNode.style.left = "0";
              endNode.style.bottom = "0";
              endNode.style.top = "auto";
              endNode.style.transform = "translate(-50%, 50%)";
              pipeline.appendChild(endNode);
            }

            // Create moving data
            const data = document.createElement("div");
            data.className = "pipeline-data";
            data.style.animationDelay = Math.random() * 2 + "s";

            if (isVertical) {
              data.style.top = "0";
              data.style.left = "0";
              data.style.transform = "translate(-50%, 0)";
              data.style.animation = "moveDataVertical 4s infinite";
            }

            pipeline.appendChild(data);
          }

          // Add connection lines between microservices
          createConnectionLines();
        }

        // Create connection lines between elements
        function createConnectionLines() {
          const microservices = document.querySelectorAll(".microservice");
          const servers = document.querySelectorAll(".cloud-server");

          // Connect microservices to each other
          for (let i = 0; i < microservices.length - 1; i++) {
            connectElements(microservices[i], microservices[i + 1]);
          }

          // Connect last microservice to first (complete the circle)
          connectElements(
            microservices[microservices.length - 1],
            microservices[0]
          );

          // Connect microservices to servers
          microservices.forEach((micro, index) => {
            if (servers[index % servers.length]) {
              connectElements(micro, servers[index % servers.length]);
            }
          });
        }

        // Helper function to connect two elements with a line
        function connectElements(elem1, elem2) {
          const rect1 = elem1.getBoundingClientRect();
          const rect2 = elem2.getBoundingClientRect();

          const x1 = rect1.left + rect1.width / 2;
          const y1 = rect1.top + rect1.height / 2;
          const x2 = rect2.left + rect2.width / 2;
          const y2 = rect2.top + rect2.height / 2;

          const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
          const angle = (Math.atan2(y2 - y1, x2 - x1) * 180) / Math.PI;

          const line = document.createElement("div");
          line.className = "connection-line";
          line.style.width = length + "px";
          line.style.left = x1 + "px";
          line.style.top = y1 + "px";
          line.style.transformOrigin = "0 0";
          line.style.transform = "rotate(" + angle + "deg)";
          line.style.opacity = 0.2;

          pipelineSystem.appendChild(line);
        }

        // Generate dynamic shooting data packets
        function createDataPackets() {
          setInterval(() => {
            const packet = document.createElement("div");
            packet.className = "data-package";

            // Random starting position
            packet.style.top = Math.random() * window.innerHeight + "px";
            packet.style.left = Math.random() * window.innerWidth + "px";

            // Random size
            const size = 6 + Math.random() * 10;
            packet.style.width = size + "px";
            packet.style.height = size + "px";

            // Random animation duration and delay
            const duration = 5 + Math.random() * 10;
            packet.style.animationDuration = duration + "s";

            document.body.appendChild(packet);

            // Remove after animation finishes
            setTimeout(() => {
              packet.remove();
            }, duration * 1000);
          }, 800);
        }

        // Initialize everything
        createPipelines();
        createDataPackets();

        // Handle window resize
        window.addEventListener("resize", function () {
          createPipelines();
        });
      });
    </script>
  </body>
</html>
